<!DOCTYPE html>

<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>MOT MYSTÃˆRE ğŸ”®</title>
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VARIABLES & RESET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{
â€“bg: #05050f;
â€“bg2: #0b0b1e;
â€“bg3: #12122b;
â€“bg4: #1a1a38;
â€“gold: #f5c842;
â€“teal: #00e5cc;
â€“pink: #ff3d7f;
â€“blue: #3d7fff;
â€“green: #00e87a;
â€“red: #ff4040;
â€“orange:#ff8c00;
â€“white: #e8eaff;
â€“muted: #5a5a8a;
â€“border:rgba(255,255,255,0.07);
â€“r:14px;
}

html,body{
min-height:100vh;
background:var(â€“bg)!important;
color:var(â€“white);
font-family:â€˜Exo 2â€™,sans-serif;
overflow-x:hidden;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BACKGROUND GRID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
body::before{
content:â€™â€™;
position:fixed;inset:0;z-index:0;
background-image:
linear-gradient(rgba(0,229,204,0.03) 1px,transparent 1px),
linear-gradient(90deg,rgba(0,229,204,0.03) 1px,transparent 1px);
background-size:40px 40px;
pointer-events:none;
}
body::after{
content:â€™â€™;
position:fixed;inset:0;z-index:0;
background:radial-gradient(ellipse 80% 60% at 50% -10%,rgba(61,127,255,0.12),transparent),
radial-gradient(ellipse 60% 40% at 100% 100%,rgba(255,61,127,0.08),transparent),
radial-gradient(ellipse 50% 50% at 0% 80%,rgba(0,229,204,0.06),transparent);
pointer-events:none;
}

#bgc{position:fixed;inset:0;z-index:0;pointer-events:none;width:100vw!important;height:100vh!important;}

.app{position:relative;z-index:1;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SCREENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.sc{display:none;width:100%;max-width:480px;flex-direction:column;align-items:center;gap:14px;}
.sc.on{display:flex;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LOGO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.logo-wrap{text-align:center;margin-bottom:4px;}
.logo-icon{font-size:52px;display:block;margin-bottom:-4px;filter:drop-shadow(0 0 20px rgba(245,200,66,0.6));animation:floatY 3s ease-in-out infinite;}
.logo-title{
font-family:â€˜Exo 2â€™,sans-serif;font-weight:900;
font-size:clamp(36px,10vw,58px);
letter-spacing:3px;text-transform:uppercase;
background:linear-gradient(135deg,var(â€“gold) 0%,var(â€“teal) 50%,var(â€“pink) 100%);
-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
line-height:1;
}
.logo-sub{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:11px;letter-spacing:4px;color:var(â€“muted);text-transform:uppercase;margin-top:6px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.card{
background:var(â€“bg2);
border:1px solid var(â€“border);
border-radius:var(â€“r);
padding:24px 20px;
width:100%;
position:relative;
overflow:hidden;
}
.card::before{
content:â€™â€™;position:absolute;top:0;left:0;right:0;height:1px;
background:linear-gradient(90deg,transparent,rgba(255,255,255,0.12),transparent);
}
.card-gold{border-color:rgba(245,200,66,0.25);box-shadow:0 0 40px rgba(245,200,66,0.06);}
.card-teal{border-color:rgba(0,229,204,0.2);box-shadow:0 0 40px rgba(0,229,204,0.05);}
.card-pink{border-color:rgba(255,61,127,0.2);box-shadow:0 0 40px rgba(255,61,127,0.06);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TYPOGRAPHY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.ttl{font-weight:900;font-size:20px;letter-spacing:1px;text-transform:uppercase;}
.lbl{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(â€“muted);margin-bottom:6px;display:block;}
.sm{font-size:13px;} .xs{font-size:11px;}
.bold{font-weight:700;} .mono{font-family:â€˜Share Tech Monoâ€™,monospace;}
.muted{color:var(â€“muted);} .tc{text-align:center;}
.gold{color:var(â€“gold);} .teal{color:var(â€“teal);} .pink{color:var(â€“pink);}
.green{color:var(â€“green);} .red{color:var(â€“red);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
BUTTONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn{
display:flex;align-items:center;justify-content:center;gap:8px;
padding:14px 20px;border-radius:10px;border:none;
font-family:â€˜Exo 2â€™,sans-serif;font-weight:700;font-size:15px;
cursor:pointer;transition:all .18s;width:100%;
position:relative;overflow:hidden;letter-spacing:.5px;text-transform:uppercase;
}
.btn:active{transform:scale(.97);}
.btn:disabled{opacity:.35;cursor:not-allowed;}

.bg{
background:linear-gradient(135deg,var(â€“gold),#e0a800);
color:#0a0a0a;box-shadow:0 4px 20px rgba(245,200,66,.35);
}
.bg:hover{box-shadow:0 6px 30px rgba(245,200,66,.55);transform:translateY(-1px);}

.bt{
background:linear-gradient(135deg,var(â€“teal),#00b8a3);
color:#0a0a0a;box-shadow:0 4px 20px rgba(0,229,204,.3);
}
.bt:hover{box-shadow:0 6px 30px rgba(0,229,204,.5);transform:translateY(-1px);}

.bp{
background:linear-gradient(135deg,var(â€“pink),#cc2060);
color:#fff;box-shadow:0 4px 20px rgba(255,61,127,.3);
}
.bp:hover{box-shadow:0 6px 30px rgba(255,61,127,.5);transform:translateY(-1px);}

.bb{
background:linear-gradient(135deg,var(â€“blue),#2255cc);
color:#fff;box-shadow:0 4px 20px rgba(61,127,255,.3);
}
.bb:hover{box-shadow:0 6px 30px rgba(61,127,255,.5);transform:translateY(-1px);}

.bgr{background:var(â€“bg3);color:var(â€“muted);border:1px solid var(â€“border);}
.bgr:hover{color:var(â€“white);}

.bsm{padding:9px 16px;font-size:12px;border-radius:8px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
INPUTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.inp{
width:100%;padding:13px 15px;
background:var(â€“bg3);border:1px solid var(â€“border);border-radius:10px;
color:var(â€“white);font-family:â€˜Exo 2â€™,sans-serif;font-size:15px;
outline:none;transition:border-color .2s,box-shadow .2s;
}
.inp:focus{border-color:var(â€“teal);box-shadow:0 0 0 3px rgba(0,229,204,.1);}
.inp::placeholder{color:var(â€“muted);}

.inp-guess{
font-family:â€˜Share Tech Monoâ€™,monospace;
font-size:22px;font-weight:700;
letter-spacing:4px;text-align:center;
text-transform:uppercase;
background:var(â€“bg3);
border:2px solid var(â€“border);
border-radius:10px;padding:16px 12px;
color:var(â€“white);width:100%;outline:none;
transition:all .2s;
}
.inp-guess:focus{border-color:var(â€“gold);box-shadow:0 0 0 4px rgba(245,200,66,.1);}
.inp-guess::placeholder{color:var(â€“muted);font-size:14px;letter-spacing:2px;}

.sel{
width:100%;padding:13px 15px;background:var(â€“bg3);border:1px solid var(â€“border);
border-radius:10px;color:var(â€“white);font-family:â€˜Exo 2â€™,sans-serif;font-size:14px;
outline:none;cursor:pointer;appearance:none;-webkit-appearance:none;
background-image:url(â€œdata:image/svg+xml,%3Csvg xmlns=â€˜http://www.w3.org/2000/svgâ€™ width=â€˜12â€™ height=â€˜8â€™%3E%3Cpath d=â€˜M1 1l5 5 5-5â€™ stroke=â€™%235a5a8aâ€™ stroke-width=â€˜1.5â€™ fill=â€˜noneâ€™ stroke-linecap=â€˜roundâ€™/%3E%3C/svg%3Eâ€);
background-repeat:no-repeat;background-position:right 14px center;
}
.sel option{background:var(â€“bg2);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CODE DISPLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.codebox{
background:var(â€“bg3);border:1px solid rgba(245,200,66,0.2);
border-radius:12px;padding:16px 20px;text-align:center;width:100%;
}
#l-code{
display:block;
font-family:â€˜Share Tech Monoâ€™,â€˜Courier Newâ€™,monospace;
font-size:44px;font-weight:700;letter-spacing:12px;
color:var(â€“gold);text-align:center;padding:4px 0;
text-shadow:0 0 20px rgba(245,200,66,0.5);
}
.copyhint{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:10px;color:var(â€“muted);cursor:pointer;margin-top:6px;letter-spacing:2px;transition:color .2s;}
.copyhint:hover{color:var(â€“teal);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PLAYER LIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.plist{display:flex;flex-direction:column;gap:6px;width:100%;}
.prow{
display:flex;align-items:center;gap:10px;
padding:10px 14px;background:var(â€“bg3);
border-radius:10px;border:1px solid var(â€“border);
animation:slideUp .3s ease-out;
}
.prow.me{border-color:rgba(245,200,66,0.3);}
.prow.master{border-color:rgba(0,229,204,0.3);background:rgba(0,229,204,0.04);}
.pav{width:34px;height:34px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:17px;flex-shrink:0;}
.pnm{font-weight:700;font-size:13px;flex:1;}
.pbdg{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:9px;padding:2px 8px;border-radius:20px;}
.bmaster{background:rgba(0,229,204,.15);color:var(â€“teal);}
.bme{background:rgba(245,200,66,.15);color:var(â€“gold);}
.bready{background:rgba(0,232,122,.15);color:var(â€“green);}
.bwait{background:rgba(90,90,138,.15);color:var(â€“muted);}
.score-badge{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:11px;color:var(â€“gold);font-weight:700;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DIFFICULTY TILES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.diff-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;width:100%;}
.dtile{
padding:12px 8px;border-radius:10px;border:1.5px solid var(â€“border);
background:var(â€“bg3);cursor:pointer;text-align:center;
transition:all .18s;user-select:none;position:relative;
}
.dtile *{pointer-events:none;}
.dtile.on{background:var(â€“bg4);}
.dtile .dico{font-size:22px;display:block;margin-bottom:3px;}
.dtile .dnm{font-size:11px;font-weight:700;display:block;letter-spacing:.5px;}
.dtile .dsub{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:9px;color:var(â€“muted);}
.d-easy.on{border-color:var(â€“green);box-shadow:0 0 12px rgba(0,232,122,.15);}
.d-medium.on{border-color:var(â€“gold);box-shadow:0 0 12px rgba(245,200,66,.15);}
.d-hard.on{border-color:var(â€“red);box-shadow:0 0 12px rgba(255,64,64,.15);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CATEGORY CHIPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cat-wrap{display:flex;flex-wrap:wrap;gap:6px;width:100%;}
.cchip{
padding:6px 12px;border-radius:20px;border:1px solid var(â€“border);
background:var(â€“bg3);cursor:pointer;font-size:11px;font-weight:700;
letter-spacing:.5px;transition:all .18s;user-select:none;
font-family:â€˜Share Tech Monoâ€™,monospace;text-transform:uppercase;
}
.cchip *{pointer-events:none;}
.cchip.on{border-color:currentColor;background:rgba(255,255,255,0.05);}
.chip-all{color:#aaa;}
.chip-animal{color:#ffb347;}
.chip-pays{color:#87ceeb;}
.chip-sport{color:#7fff7f;}
.chip-objet{color:#dda0dd;}
.chip-metier{color:#f0e68c;}
.chip-nature{color:#98fb98;}
.chip-food{color:#ff6b6b;}
.chip-cinema{color:#ff9f43;}
.chip-musique{color:#a29bfe;}
.chip-science{color:#74b9ff;}
.chip-histoire{color:#fdcb6e;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
GAME SCREEN â€” TOPBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.gtop{
display:flex;justify-content:space-between;align-items:center;
width:100%;max-width:540px;margin-bottom:10px;padding:0 2px;
}
.rpill{
font-family:â€˜Share Tech Monoâ€™,monospace;font-size:10px;
color:var(â€“muted);background:var(â€“bg2);
border:1px solid var(â€“border);border-radius:20px;padding:5px 11px;
letter-spacing:1px;
}

/* Timer */
.timer-wrap{display:flex;align-items:center;gap:8px;}
.timer-ring{position:relative;width:42px;height:42px;flex-shrink:0;}
.timer-ring svg{transform:rotate(-90deg);}
.timer-ring circle{stroke-dasharray:113;stroke-dashoffset:0;transition:stroke-dashoffset 1s linear,stroke .5s;}
#timer-txt{
font-family:â€˜Share Tech Monoâ€™,monospace;font-size:14px;font-weight:700;
position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
}

/* Progress bar */
.progress-wrap{width:100%;max-width:540px;margin-bottom:12px;}
.ptrack{height:3px;background:rgba(255,255,255,.05);border-radius:4px;overflow:hidden;}
.pbar{height:100%;background:linear-gradient(90deg,var(â€“teal),var(â€“gold),var(â€“pink));border-radius:4px;transition:width .6s ease;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
WORD DISPLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.word-zone{
background:var(â€“bg2);border:1px solid var(â€“border);
border-radius:16px;padding:22px 18px;width:100%;max-width:540px;
position:relative;overflow:hidden;
}
.word-zone::before{
content:â€™â€™;position:absolute;top:0;left:0;right:0;height:2px;
background:linear-gradient(90deg,var(â€“teal),var(â€“gold),var(â€“pink));
}

.wz-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;}
.wz-cat{
font-family:â€˜Share Tech Monoâ€™,monospace;font-size:10px;letter-spacing:2px;
text-transform:uppercase;padding:4px 10px;border-radius:6px;
background:rgba(245,200,66,.1);color:var(â€“gold);border:1px solid rgba(245,200,66,.2);
}
.wz-pts{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:11px;color:var(â€“teal);}

/* Blanks */
.blanks{
display:flex;flex-wrap:wrap;gap:6px;justify-content:center;
margin:10px 0 14px;
}
.blank{
width:32px;height:38px;border-bottom:2px solid rgba(255,255,255,.3);
display:flex;align-items:flex-end;justify-content:center;padding-bottom:4px;
font-family:â€˜Share Tech Monoâ€™,monospace;font-size:20px;font-weight:700;
transition:all .3s;
color:var(â€“white);
}
.blank.revealed{border-color:var(â€“teal);color:var(â€“teal);animation:letterPop .4s cubic-bezier(.34,1.56,.64,1);}
.blank.space{width:16px;border:none;}
.blank.correct{border-color:var(â€“green);color:var(â€“green);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
INDICES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.indices-wrap{display:flex;flex-direction:column;gap:6px;width:100%;}
.indice{
display:flex;align-items:flex-start;gap:10px;
padding:10px 14px;background:var(â€“bg3);
border-radius:10px;border:1px solid var(â€“border);
animation:slideUp .35s ease-out;
}
.indice-num{
font-family:â€˜Share Tech Monoâ€™,monospace;font-size:10px;
color:var(â€“teal);flex-shrink:0;margin-top:2px;
background:rgba(0,229,204,.1);padding:2px 6px;border-radius:4px;letter-spacing:1px;
}
.indice-txt{font-size:13px;line-height:1.5;flex:1;}
.indice-who{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:9px;color:var(â€“muted);margin-top:3px;}

/* No indices yet */
.no-indice{
padding:18px;text-align:center;
font-family:â€˜Share Tech Monoâ€™,monospace;font-size:11px;color:var(â€“muted);
letter-spacing:2px;border:1px dashed rgba(255,255,255,.06);border-radius:10px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MASTER VIEW (give hints)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.master-zone{
background:linear-gradient(135deg,rgba(0,229,204,.05),rgba(61,127,255,.05));
border:1px solid rgba(0,229,204,.2);border-radius:16px;
padding:20px 18px;width:100%;max-width:540px;
}
.master-word{
font-family:â€˜Share Tech Monoâ€™,monospace;
font-size:clamp(24px,7vw,38px);font-weight:700;
letter-spacing:6px;text-align:center;
color:var(â€“teal);text-transform:uppercase;
text-shadow:0 0 20px rgba(0,229,204,.4);
padding:14px 0;
background:var(â€“bg3);border-radius:10px;margin:12px 0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
GUESS RESULT ANIMATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.guess-feed{display:flex;flex-direction:column;gap:5px;width:100%;max-height:200px;overflow-y:auto;}
.guess-row{
display:flex;align-items:center;justify-content:space-between;
padding:8px 12px;background:var(â€“bg3);border-radius:8px;
border:1px solid var(â€“border);animation:slideUp .25s ease-out;
font-size:13px;
}
.guess-row.correct{border-color:var(â€“green);background:rgba(0,232,122,.06);}
.guess-row.wrong{border-color:rgba(255,64,64,.2);}
.guess-row.close{border-color:rgba(245,200,66,.2);background:rgba(245,200,66,.04);}
.guess-who{font-weight:700;font-size:12px;}
.guess-word{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:12px;letter-spacing:2px;}
.guess-result{font-size:14px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SCOREBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.score-table{display:flex;flex-direction:column;gap:6px;width:100%;}
.score-row{
display:flex;align-items:center;gap:12px;
padding:12px 16px;background:var(â€“bg2);
border-radius:12px;border:1px solid var(â€“border);
}
.score-rank{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:22px;width:32px;text-align:center;}
.score-name{font-weight:700;flex:1;}
.score-pts{
font-family:â€˜Share Tech Monoâ€™,monospace;font-size:16px;font-weight:700;
color:var(â€“gold);
}
.score-delta{font-family:â€˜Share Tech Monoâ€™,monospace;font-size:10px;color:var(â€“green);margin-left:4px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#toast{
position:fixed;top:20px;left:50%;
transform:translateX(-50%) translateY(-80px);
background:var(â€“bg2);border:1px solid rgba(255,255,255,.1);
border-radius:10px;padding:11px 20px;
font-weight:700;font-size:14px;z-index:9999;
transition:transform .35s cubic-bezier(.34,1.56,.64,1);
white-space:nowrap;max-width:90vw;text-align:center;
pointer-events:none;color:var(â€“white);
font-family:â€˜Share Tech Monoâ€™,monospace;letter-spacing:1px;
}
#toast.up{transform:translateX(-50%) translateY(0);}
#toast.ok{border-color:var(â€“green);}
#toast.er{border-color:var(â€“red);}
#toast.if{border-color:var(â€“teal);}
#toast.gd{border-color:var(â€“gold);}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TOP BUTTONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.topbtn{
position:fixed;z-index:300;background:var(â€“bg2);
border:1px solid var(â€“border);border-radius:8px;
padding:7px 13px;font-size:12px;font-weight:700;cursor:pointer;
font-family:â€˜Share Tech Monoâ€™,monospace;color:var(â€“muted);
display:none;align-items:center;gap:5px;
transition:all .2s;letter-spacing:1px;
}
.topbtn:hover{color:var(â€“white);border-color:var(â€“teal);}
.topbtn.vis{display:flex;}
#back-btn{top:12px;left:12px;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ROUND RESULT OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#result-overlay{
position:fixed;inset:0;z-index:500;
display:none;align-items:center;justify-content:center;
background:rgba(5,5,15,.85);backdrop-filter:blur(8px);
padding:16px;
}
#result-overlay.show{display:flex;}
.result-card{
background:var(â€“bg2);border:1px solid var(â€“border);
border-radius:20px;padding:28px 22px;
max-width:400px;width:100%;text-align:center;
animation:cardPop .5s cubic-bezier(.34,1.56,.64,1);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes floatY{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
@keyframes cardPop{from{opacity:0;transform:scale(.8) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}
@keyframes slideUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
@keyframes letterPop{0%{transform:scale(0) rotateY(90deg)}70%{transform:scale(1.2)}100%{transform:scale(1) rotateY(0)}}
@keyframes pulseGold{0%,100%{box-shadow:0 0 0 0 rgba(245,200,66,.4)}50%{box-shadow:0 0 0 8px rgba(245,200,66,0)}}
@keyframes confY{to{transform:translateY(110vh) rotate(720deg);opacity:0}}
@keyframes rot{to{transform:rotate(360deg)}}
@keyframes shimmer{0%{background-position:-200% center}100%{background-position:200% center}}
.shk{animation:shk .35s ease}
@keyframes shk{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-5px)}80%{transform:translateX(4px)}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MISC UTILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.col{display:flex;flex-direction:column;gap:10px;width:100%;}
.row{display:flex;gap:8px;align-items:center;}
.sep{width:100%;height:1px;background:var(â€“border);margin:6px 0;}
.w100{width:100%;} .mt4{margin-top:4px;} .mt8{margin-top:8px;} .mt12{margin-top:12px;}
.mb4{margin-bottom:4px;} .mb8{margin-bottom:8px;} .mb12{margin-bottom:12px;}
.spin{width:40px;height:40px;border:3px solid rgba(255,255,255,.07);border-top-color:var(â€“teal);border-radius:50%;animation:rot .8s linear infinite;}

@media(max-width:360px){
.blanks .blank{width:26px;height:32px;font-size:16px;}
.master-word{font-size:20px;letter-spacing:3px;}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MODE CLAIR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root.light{
â€“bg: #f0f2ff;
â€“bg2: #ffffff;
â€“bg3: #e8eaf8;
â€“bg4: #dde0f5;
â€“gold: #b8860b;
â€“teal: #007a6e;
â€“pink: #c41255;
â€“blue: #1a4ecc;
â€“green: #0a8c4a;
â€“red: #cc2222;
â€“orange:#cc6600;
â€“white: #0a0a1f;
â€“muted: #7070a0;
â€“border:rgba(0,0,0,0.09);
color-scheme:light;
}
:root.light body::before{
background-image:
linear-gradient(rgba(0,100,120,0.04) 1px,transparent 1px),
linear-gradient(90deg,rgba(0,100,120,0.04) 1px,transparent 1px);
background-size:40px 40px;
}
:root.light body::after{
background:
radial-gradient(ellipse 80% 60% at 50% -10%,rgba(61,127,255,0.07),transparent),
radial-gradient(ellipse 60% 40% at 100% 100%,rgba(200,20,80,0.05),transparent),
radial-gradient(ellipse 50% 50% at 0% 80%,rgba(0,150,130,0.04),transparent);
}
:root.light .card{box-shadow:0 4px 20px rgba(0,0,0,0.08);}
:root.light .card::before{background:linear-gradient(90deg,transparent,rgba(0,0,0,0.05),transparent);}
:root.light .inp,:root.light .inp-guess,:root.light .sel{background:var(â€“bg3);}
:root.light .sel option{background:var(â€“bg2);}
:root.light #result-overlay{background:rgba(220,225,255,0.88);}
:root.light .result-card{box-shadow:0 12px 50px rgba(0,0,0,0.15);}
:root.light .master-zone{background:linear-gradient(135deg,rgba(0,150,130,.06),rgba(61,127,255,.05));border-color:rgba(0,150,130,.25);}
:root.light .master-word{text-shadow:0 0 16px rgba(0,150,130,.25);}
:root.light .word-zone::before{background:linear-gradient(90deg,var(â€“teal),var(â€“gold),var(â€“pink));}
:root.light .prow.master{background:rgba(0,150,130,.05);}
:root.light .no-indice{border-color:rgba(0,0,0,.1);}
:root.light #toast{background:var(â€“bg2);color:var(â€“white);}
:root.light .logo-title{filter:none;}
:root.light .topbtn{background:var(â€“bg2);}

/* â”€â”€ BOUTON THEME â”€â”€ */
#theme-btn{
position:fixed;top:12px;right:12px;z-index:300;
background:var(â€“bg2);border:1px solid var(â€“border);
border-radius:8px;padding:7px 13px;font-size:12px;font-weight:700;
cursor:pointer;font-family:â€˜Share Tech Monoâ€™,monospace;color:var(â€“muted);
display:flex;align-items:center;gap:5px;transition:all .2s;letter-spacing:1px;
}
#theme-btn:hover{color:var(â€“white);border-color:var(â€“gold);}
</style>

</head>
<body>
<canvas id="bgc"></canvas>
<button class="topbtn" id="back-btn">â† QUITTER</button>
<button id="theme-btn"><span id="t-icon">â˜€ï¸</span> <span id="t-lbl">CLAIR</span></button>
<div id="toast"></div>

<!-- ROUND RESULT OVERLAY -->

<div id="result-overlay">
<div class="result-card">
<div id="ro-icon" style="font-size:52px;margin-bottom:8px;">ğŸ‰</div>
<div id="ro-title" style="font-family:'Share Tech Mono',monospace;font-size:22px;letter-spacing:2px;margin-bottom:6px;"></div>
<div id="ro-word" style="font-family:'Share Tech Mono',monospace;font-size:14px;color:var(--muted);margin-bottom:16px;"></div>
<div id="ro-scores" style="margin-bottom:18px;"></div>
<button class="btn bb" id="ro-next" style="display:none;">PROCHAINE MANCHE â†’</button>
<div id="ro-wait" style="font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--muted);letter-spacing:2px;display:none;">EN ATTENTE DU MAÃTRE...</div>
</div>
</div>

<div class="app">

<!-- â•â•â•â•â•â•â•â•â•â• HOME â•â•â•â•â•â•â•â•â•â• -->

<div id="s-home" class="sc on">
<div class="logo-wrap">
<span class="logo-icon">ğŸ”®</span>
<div class="logo-title">MOT MYSTÃˆRE</div>
<div class="logo-sub">// Multijoueur Â· Indices Â· DÃ©duction //</div>
</div>
<div class="col" style="max-width:340px;gap:10px;">
<button class="btn bg" id="btn-go-create">ğŸ¯ CrÃ©er une partie</button>
<button class="btn bt" id="btn-go-join">ğŸš€ Rejoindre une partie</button>
</div>
<div class="mt8 xs muted tc mono">2â€“8 joueurs Â· 500+ mots Â· Multijoueur en ligne</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• CREATE â•â•â•â•â•â•â•â•â•â• -->

<div id="s-create" class="sc">
<div style="text-align:center;margin-bottom:4px;">
<div class="logo-icon" style="font-size:32px;animation:none;">ğŸ”®</div>
<div style="font-weight:900;font-size:20px;letter-spacing:2px;">NOUVELLE PARTIE</div>
</div>

```
<div class="card card-gold w100">
<div class="col">
<div>
<span class="lbl">Ton pseudo</span>
<input class="inp" id="c-name" type="text" placeholder="Ex: Shadow42" maxlength="14" autocomplete="off">
</div>
<div>
<span class="lbl">Manches</span>
<select class="sel" id="c-rounds">
<option value="3">3 manches â€” apÃ©ro ğŸ¥‚</option>
<option value="5" selected>5 manches â€” classique ğŸ¯</option>
<option value="8">8 manches â€” marathon âš¡</option>
<option value="12">12 manches â€” lÃ©gendaire ğŸ†</option>
</select>
</div>
<div>
<span class="lbl">DifficultÃ©</span>
<div class="diff-grid">
<div class="dtile d-easy on" data-diff="facile"><span class="dico">ğŸ˜Š</span><span class="dnm" style="color:var(--green)">FACILE</span><span class="dsub">Mots courants</span></div>
<div class="dtile d-medium" data-diff="moyen"><span class="dico">ğŸ”¥</span><span class="dnm" style="color:var(--gold)">MOYEN</span><span class="dsub">Mots variÃ©s</span></div>
<div class="dtile d-hard" data-diff="difficile"><span class="dico">ğŸ’€</span><span class="dnm" style="color:var(--red)">DIFFICILE</span><span class="dsub">Mots rares</span></div>
</div>
</div>
<div>
<span class="lbl">CatÃ©gories (plusieurs possibles)</span>
<div class="cat-wrap" id="cat-wrap">
<div class="cchip chip-all on" data-cat="tous">ğŸŒ TOUS</div>
<div class="cchip chip-animal" data-cat="animal">ğŸ¾ ANIMAUX</div>
<div class="cchip chip-pays" data-cat="pays">ğŸŒ PAYS</div>
<div class="cchip chip-sport" data-cat="sport">âš½ SPORT</div>
<div class="cchip chip-objet" data-cat="objet">ğŸ”§ OBJETS</div>
<div class="cchip chip-metier" data-cat="metier">ğŸ’¼ MÃ‰TIERS</div>
<div class="cchip chip-nature" data-cat="nature">ğŸŒ¿ NATURE</div>
<div class="cchip chip-food" data-cat="food">ğŸ• FOOD</div>
<div class="cchip chip-cinema" data-cat="cinema">ğŸ¬ CINÃ‰MA</div>
<div class="cchip chip-musique" data-cat="musique">ğŸµ MUSIQUE</div>
<div class="cchip chip-science" data-cat="science">ğŸ”¬ SCIENCE</div>
<div class="cchip chip-histoire" data-cat="histoire">ğŸ“œ HISTOIRE</div>
</div>
</div>
<div>
<span class="lbl">Temps par manche</span>
<select class="sel" id="c-timer">
<option value="60">60 secondes</option>
<option value="90" selected>90 secondes</option>
<option value="120">2 minutes</option>
<option value="180">3 minutes</option>
</select>
</div>
<button class="btn bg" id="btn-create">CRÃ‰ER LA PARTIE âœ¨</button>
<button class="btn bgr bsm" id="btn-create-back">â† RETOUR</button>
</div>
</div>
```

</div>

<!-- â•â•â•â•â•â•â•â•â•â• JOIN â•â•â•â•â•â•â•â•â•â• -->

<div id="s-join" class="sc">
<div style="text-align:center;margin-bottom:4px;">
<div class="logo-icon" style="font-size:32px;animation:none;">ğŸš€</div>
<div style="font-weight:900;font-size:20px;letter-spacing:2px;">REJOINDRE</div>
</div>
<div class="card card-teal w100">
<div class="col">
<div>
<span class="lbl">Ton pseudo</span>
<input class="inp" id="j-name" type="text" placeholder="Ex: Ninja99" maxlength="14" autocomplete="off">
</div>
<div>
<span class="lbl">Code de la partie</span>
<input class="inp" id="j-code" type="text" placeholder="XXXX" maxlength="4"
style="text-align:center;font-family:'Share Tech Mono',monospace;font-size:28px;font-weight:700;letter-spacing:10px;">
</div>
<button class="btn bt" id="btn-join">REJOINDRE â†’</button>
<button class="btn bgr bsm" id="btn-join-back">â† RETOUR</button>
</div>
</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• LOBBY â•â•â•â•â•â•â•â•â•â• -->

<div id="s-lobby" class="sc">
<div style="text-align:center;width:100%;">
<div style="font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--muted);letter-spacing:3px;margin-bottom:6px;">CODE DE LA PARTIE</div>
<div class="codebox">
<span id="l-code" style="display:block;font-family:'Share Tech Mono','Courier New',monospace;font-size:44px;font-weight:700;letter-spacing:12px;color:#f5c842;text-align:center;padding:4px 0;text-shadow:0 0 20px rgba(245,200,66,0.5);">----</span>
<div class="copyhint" id="btn-copy">[ APPUYER POUR COPIER ]</div>
</div>
</div>
<div class="card w100">
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
<div style="font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:2px;color:var(--teal);">JOUEURS CONNECTÃ‰S</div>
<div id="l-status" class="mono xs muted"></div>
</div>
<div class="plist" id="l-players"></div>
</div>
<div id="l-settings" class="mono xs muted tc" style="line-height:2;"></div>
<button class="btn bg w100" id="l-start" style="display:none;">âš¡ LANCER LA PARTIE !</button>
<div id="l-hint" class="mono xs muted tc" style="display:none;"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• GAME â•â•â•â•â•â•â•â•â•â• -->

<div id="s-game" class="sc" style="max-width:540px;gap:10px;">

```
<!-- Topbar -->
<div class="gtop">
<div style="display:flex;flex-direction:column;">
<div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:var(--muted);letter-spacing:2px;">MANCHE</div>
<div id="g-round" style="font-family:'Share Tech Mono',monospace;font-size:14px;color:var(--white);font-weight:700;">1/5</div>
</div>
<div class="timer-wrap" id="timer-wrap">
<div class="timer-ring">
<svg width="42" height="42" viewBox="0 0 42 42">
<circle cx="21" cy="21" r="18" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="3"/>
<circle id="timer-arc" cx="21" cy="21" r="18" fill="none" stroke="var(--teal)" stroke-width="3" stroke-linecap="round"/>
</svg>
<span id="timer-txt" style="color:var(--teal);">90</span>
</div>
<div style="text-align:right;">
<div style="font-family:'Share Tech Mono',monospace;font-size:9px;color:var(--muted);">MAÃTRE</div>
<div id="g-master" style="font-family:'Share Tech Mono',monospace;font-size:12px;color:var(--teal);font-weight:700;">â€”</div>
</div>
</div>
</div>

<!-- Progress -->
<div class="progress-wrap">
<div class="ptrack"><div class="pbar" id="g-prog" style="width:0%"></div></div>
</div>

<!-- â”€â”€ VUE MAÃTRE â”€â”€ -->
<div id="ph-master" style="display:none;width:100%;">
<div class="master-zone">
<div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--teal);letter-spacing:3px;text-align:center;margin-bottom:4px;">C'EST TOI LE MAÃTRE DES INDICES ğŸ‘‘</div>
<div class="master-word" id="master-word">CHARGEMENT...</div>
<div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--muted);text-align:center;margin-bottom:14px;" id="master-cat">CatÃ©gorie : â€”</div>
<div>
<span class="lbl">Donne un indice (sans le mot ni partie du mot !)</span>
<div class="row w100" style="gap:8px;">
<input class="inp" id="hint-inp" type="text" placeholder="Ex: c'est un animal sauvage..." maxlength="80" style="flex:1;">
<button class="btn bt bsm" id="btn-hint" style="width:auto;white-space:nowrap;">ENVOYER</button>
</div>
<div id="hints-sent" class="col mt8" style="gap:5px;"></div>
</div>
</div>
</div>

<!-- â”€â”€ VUE DEVINEURS â”€â”€ -->
<div id="ph-guess" style="display:none;width:100%;">
<!-- Mot Ã  deviner (lettres masquÃ©es) -->
<div class="word-zone">
<div class="wz-header">
<div class="wz-cat" id="g-cat">CatÃ©gorie</div>
<div class="wz-pts" id="g-pts">â­ 100pts</div>
</div>
<div class="blanks" id="g-blanks"></div>
<div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--muted);text-align:center;" id="g-letters-info"></div>
</div>

<!-- Indices reÃ§us -->
<div style="width:100%;">
<div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--muted);letter-spacing:2px;margin-bottom:6px;">INDICES :</div>
<div id="g-indices" class="indices-wrap">
<div class="no-indice">EN ATTENTE DU PREMIER INDICE...</div>
</div>
</div>

<!-- Guess feed -->
<div style="width:100%;">
<div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--muted);letter-spacing:2px;margin-bottom:6px;">TENTATIVES :</div>
<div id="g-guesses" class="guess-feed">
<div class="no-indice">PERSONNE N'A ENCORE ESSAYÃ‰...</div>
</div>
</div>

<!-- Input devinette -->
<div id="guess-input-zone" style="width:100%;">
<div class="row w100" style="gap:8px;">
<input class="inp-guess" id="guess-inp" type="text" placeholder="TON MOT..." maxlength="32" style="flex:1;">
<button class="btn bg bsm" id="btn-guess" style="width:auto;white-space:nowrap;min-width:90px;">DEVINER</button>
</div>
</div>
<div id="already-guessed" style="display:none;font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--green);text-align:center;padding:8px;letter-spacing:1px;">âœ… TU AS DÃ‰JÃ€ TROUVÃ‰ ! EN ATTENTE DES AUTRES...</div>
</div>
```

</div>

<!-- â•â•â•â•â•â•â•â•â•â• END â•â•â•â•â•â•â•â•â•â• -->

<div id="s-end" class="sc">
<div style="text-align:center;margin-bottom:8px;">
<div style="font-size:64px;filter:drop-shadow(0 0 20px rgba(245,200,66,.6));">ğŸ†</div>
<div style="font-family:'Share Tech Mono',monospace;font-size:28px;letter-spacing:4px;color:var(--gold);margin-top:4px;">PARTIE TERMINÃ‰E</div>
<div id="e-winner" style="font-size:14px;color:var(--muted);margin-top:6px;font-family:'Share Tech Mono',monospace;"></div>
</div>
<div class="score-table w100" id="e-scores"></div>
<div class="row w100 mt12" style="flex-wrap:wrap;justify-content:center;gap:8px;">
<button class="btn bg" id="btn-replay" style="width:auto;padding:13px 24px;">ğŸ”„ REJOUER</button>
<button class="btn bgr" id="btn-home-end" style="width:auto;padding:13px 24px;">ğŸ  ACCUEIL</button>
</div>
</div>

</div><!-- /app -->

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FIREBASE â€” chargement silencieux
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// THEME SOMBRE / CLAIR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var isLight=localStorage.getItem('mm_theme')==='light';
function applyTheme(l){
isLight=l;
document.documentElement.classList.toggle('light',l);
var ic=document.getElementById('t-icon');
var lb=document.getElementById('t-lbl');
if(ic)ic.textContent=l?'ğŸŒ™':'â˜€ï¸';
if(lb)lb.textContent=l?'SOMBRE':'CLAIR';
localStorage.setItem('mm_theme',l?'light':'dark');
}
applyTheme(isLight);

var db=null,fbReady=false;
(function(){
var s1=document.createElement('script');
s1.src='https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js';
s1.async=true;
s1.onload=function(){
var s2=document.createElement('script');
s2.src='https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js';
s2.async=true;
s2.onload=function(){
try{
if(!firebase.apps.length){
firebase.initializeApp({
apiKey:"AIzaSyAWW-rnF1dqdCc5kCuI-d9dTSMrBJCrSb0",
authDomain:"test-a5848.firebaseapp.com",
databaseURL:"https://test-a5848-default-rtdb.europe-west1.firebasedatabase.app",
projectId:"test-a5848",
storageBucket:"test-a5848.firebasestorage.app",
messagingSenderId:"704331097703",
appId:"1:704331097703:web:664a8e24613d38ed2316c2"
});
}
db=firebase.database();
fbReady=true;
}catch(e){console.warn('FB error',e);}
};
document.head.appendChild(s2);
};
document.head.appendChild(s1);
})();
function whenFB(fn){if(fbReady)fn();else setTimeout(function(){whenFB(fn);},80);}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BASE DE MOTS â€” 500+ mots par catÃ©gorie/difficultÃ©
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var WORDS={
animal:{
facile:['CHAT','CHIEN','LAPIN','VACHE','MOUTON','COCHON','CHEVAL','POULE','CANARD','SINGE','OURS','LOUP','RENARD','SERPENT','GRENOUILLE','TIGRE','LION','ELEPHANT','GIRAFE','ZEBRE'],
moyen:['DAUPHIN','PERROQUET','CAMELEON','CROCODILE','HIPPOPOTAME','FLAMANT','MANCHOT','TATOU','ORNITHORYNQUE','CAPYBARA','OKAPI','TAPIR','AXOLOTL','OUISTITI','PANGOLIN','NARVAL','DUGONG','BINTURONG','FOSSA','QUOKKA'],
difficile:['COELACANTHE','NAUTILE','TARDIGRADE','TRILOBITE','PLATHELMINTHE','XENARTHRE','MONOTREME','SYNGNATHES','ACANTHOCEPHALE','BDELLOIDE','NEMATOCYSTE','PTYCHOCHROMIS','POLYCHAETE','XENOCANTHUS']
},
pays:{
facile:['FRANCE','ESPAGNE','ITALIE','PORTUGAL','BELGIQUE','SUISSE','ALLEMAGNE','JAPON','CHINE','CANADA','MEXIQUE','BRESIL','MAROC','ALGERIE','TUNISIE'],
moyen:['MOZAMBIQUE','EQUATEUR','BOTSWANA','ALBANIE','SLOVENIE','ESTONIE','MALAISIE','CAMBODGE','URUGUAY','PARAGUAY','NICARAGUA','HONDURAS','GEORGIE','ARMENIE','AZERBAIDJAN'],
difficile:['LIECHTENSTEIN','TURKMENISTAN','TADJIKISTAN','OUZBEKTSTAN','KYRGYZSTAN','MICRONESIA','VANUATU','KIRIBATI','NAURU','TUVALU','PALAU','SWAZILAND','LESOTHO','DJIBOUTI','COMORES']
},
sport:{
facile:['FOOTBALL','TENNIS','NATATION','BOXE','RUGBY','GOLF','BASKET','VOLLEY','JUDO','KARATE','VELO','COURSE','HANDBALL','PATINAGE','SKI'],
moyen:['BADMINTON','ESCRIME','AVIRON','TRIATLON','PENTATHLON','BOBSLEIGH','CURLING','WATERPOLO','PELOTE','SUMO','KENDO','LACROSSE','POLO','CROQUET','SOFTBALL'],
difficile:['SEPAKTAKRAW','KABADDI','BOSSABALL','BEIBOL','BUZKASHI','PESAPALLO','KKOTJIRIM','PANKRATION','MOTOBALL','HORNUSSEN','CALCIO','SLAMBALL','KRONUM']
},
objet:{
facile:['TABLE','CHAISE','LAMPE','STYLO','LIVRE','FENETRE','MIROIR','TELEPHONE','ORDINATEUR','CISEAUX','PARAPLUIE','HORLOGE','BOUGIE','COUSSIN','TABLEAU'],
moyen:['THERMOMETRE','MICROSCOPE','TELESCOPE','BOUSSOLE','GYROSCOPE','KALEIDOSCOPE','SEXTANT','ASTROLABE','METRONOME','STEREOSCOPE','STRETHOSCOPE','PANTOGRAPHE','SOUFFLET','ALAMBIC'],
difficile:['OCTANT','HYGROMETRE','PYRANOMETRE','ACTINOMETRE','BOLOMETRE','SPECTROSCOPE','REFRACTOMETRE','CRYOSTAT','MICROTOME','TACHYMETRE','GALVANOMETRE','AMPLIATEUR']
},
metier:{
facile:['DOCTEUR','POMPIER','PILOTE','CUISINIER','PROFESSEUR','ARCHITECTE','AVOCAT','PLOMBIER','COIFFEUR','ACTEUR','CHANTEUR','PHOTOGRAPHE','JARDINIER','BOUCHER','BOULANGER'],
moyen:['OSTEOPATHE','SOMMELIER','LUTHIER','TAXIDERMISTE','CARTOGRAPHE','ORFEVRE','CALLIGRAPHE','BOTTIER','CHAPELIER','TONNELIER','VANNIER','SAGEFEMME','CHIROPRACTEUR','NATURALISTE'],
difficile:['THANATOLOGUE','NOSOLOGUE','CETOLOGUE','POMOLOGUE','HERPETOLOGUE','MALACOLOGISTE','PALEOBOTANISTE','ARACHNOLOGUE','ICHNOLOGUE','GLACIOLOGUE']
},
nature:{
facile:['MONTAGNE','RIVIERE','FORET','DESERT','OCEAN','VOLCAN','VALLEE','PLAGE','GROTTE','PRAIRIE','COLLINE','GLACIER','ETANG','MARAIS','FJORD'],
moyen:['STALAGMITE','ESTUAIRE','MANGROVE','ATOLL','SAVANE','TOUNDRA','TAIGA','STEPPE','MORAINE','SOLFATARE','GEYSER','MAREMME','DELTA','LAGUNE','TOURBIERE'],
difficile:['KARST','LOESS','DRUMLINS','YARDANG','POTHOLE','PENEPLAINE','HORST','GRABEN','OPHIOLITE','BATHOLITE','XENOLITE','GRANULITE','ECLOGITE']
},
food:{
facile:['PIZZA','SUSHI','BURGER','CREPE','SALADE','SOUPE','PASTA','FROMAGE','CHOCOLAT','GLACE','GATEAU','POISSON','POULET','STEAK','TARTE'],
moyen:['BOUILLABAISSE','COUSCOUS','PAELLA','RACLETTE','BRUSCHETTA','TIRAMISU','GUACAMOLE','TABOULEH','RATATOUILLE','CASSOULET','CEVICHE','GOULASH','TAGINE','PIEROGI','KIMCHI'],
difficile:['BRIGADEIRO','JALEBI','BAKLAVA','INJERA','LUTEFISK','BALUT','HAGGIS','SURSTROMING','NATTÅŒ','DURIAN','KOPI','VEGEMITE','MARMITE','CASU']
},
cinema:{
facile:['TITANIC','BATMAN','AVATAR','ROCKY','ALIEN','JOKER','MATRIX','GREASE','INCEPTION','JAWS','PSYCHO','BAMBI','DUMBO','PINOCCHIO','FANTASIA'],
moyen:['VERTIGO','CASABLANCA','AMADEUS','SCHINDLER','RASHOMON','METROPOLIS','NOSFERATU','CHINATOWN','CLOCKWORK','RATATOUILLE','LABYRINTH','SHINING','SELMA','MOONLIGHT'],
difficile:['ANDREI RUBLEV','SATANTANGO','WERCKMEISTER','JEANNE DIELMAN','SANSHO','UGETSU','SHOAH','PLAYTIME','STALKER','GERTRUD','VAGABONDE']
},
musique:{
facile:['GUITARE','PIANO','VIOLON','TROMPETTE','BATTERIE','FLUTE','HARPE','SAXOPHONE','BASSE','ACCORDEON','TAMBOUR','BANJO','MANDOLINE','ORGUE','CLARINETTE'],
moyen:['THEREMIN','SITAR','DIDGERIDOO','KOTO','DULCIMER','MBIRA','KORA','BERIMBAU','BALALAIKA','CITTERN','REBAB','ERHU','GAYAGEUM','TABLA','SOUSAPHONE'],
difficile:['ONDES MARTENOT','CRISTAL BASCHET','HYDRAULOPHONE','PYROPHONE','OCTOBASSE','SERPENT','SERPENTCLEIDE','OPHICLEIDE','SARRUSOPHONE','HECKELPHONE']
},
science:{
facile:['ATOME','ELECTRON','PROTON','NOYAU','MOLECULE','CELLULE','ADN','GENE','PROTEINE','ENZYME','VIRUS','BACTERIE','PLASMA','NEUTRON','ISOTOPE'],
moyen:['PHOTOSYNTHESE','MITOCHONDRIE','CHROMOSOME','RIBOSOMES','CHLOROPHYLLE','CATALYSE','OSMOSE','DIFFRACTION','INTERFERENCES','RESONANCE','THERMOLYSE','ELECTROLYSE'],
difficile:['BIOLUMINESCENCE','PIEZOELECTRICITE','SUPERCONDUCTEUR','FERROMAGNETISME','BREMSSTRAHLUNG','RENORMALISATION','DECOHERENCE','SPINTRONIC','TOPOLOGIE','HOLOMORPHIE']
},
histoire:{
facile:['NAPOLEON','CLEOPATRE','VERSAILLES','PYRAMIDE','COLISEE','TROIE','ROME','ATHENES','PHARAON','CHEVALIER','CROISADE','REVOLUTION','RENAISSANCE','MOYEN AGE'],
moyen:['CARTHAGE','HANNIBAL','SPARTACUS','CALIGULA','JUSTINIEN','CHARLEMAGNE','TAMERLANE','GENGIS KHAN','SULEIMAN','RICHELIEU','MAZARIN','COLBERT','AUSTERLITZ'],
difficile:['TEOTIHUACAN','AKKAD','URARTOU','ELAM','MITANNI','HYKSOS','PTOLEMEE','SELEUCIDE','SASSANIDE','ARSACIDE','GONDWANA','TOLTEC','HUARI']
},
tous:{
facile:['SOLEIL','LUNE','ETOILE','MAISON','VOITURE','FLEUR','ARBRE','ENFANT','FEMME','HOMME','AMOUR','JOIE','REVE','NUIT','JOUR'],
moyen:['AVENTURE','MYSTERE','LIBERTE','SAGESSE','COURAGE','JUSTICE','BONHEUR','PARTAGE','LUMIERE','SILENCE','HARMONIE','PATIENCE','AUDACE','BEAUTE','ENERGIE'],
difficile:['SERENDIPITE','INEFFABLE','EPHEMERE','ZENITH','ABYSSAL','PALIMPSESTE','QUIDDITE','SYNCRETISME','APOPHATIQUE','LOGOMACIE','ESCHATOLOGIE']
}
};

function getWord(cats,diff){
// SÃ©lectionner parmi les catÃ©gories choisies
var pool=[];
(cats||['tous']).forEach(function(cat){
var c=WORDS[cat];
if(c&&c[diff])pool=pool.concat(c[diff]);
});
if(!pool.length){pool=WORDS.tous[diff]||WORDS.tous.facile;}
return pool[Math.floor(Math.random()*pool.length)];
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Ã‰TAT GLOBAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var COLORS=['#f5c842','#00e5cc','#ff3d7f','#3d7fff','#00e87a','#ff8c00','#a29bfe','#ff6b6b','#74b9ff','#fdcb6e'];
var AVATARS=['ğŸ¯','ğŸ¦Š','ğŸ’€','ğŸ¤–','ğŸ‘¾','ğŸŒŸ','ğŸ”¥','âš¡','ğŸ’','ğŸ­'];

var myId=sessionStorage.getItem('mm_uid')||Math.random().toString(36).slice(2,11);
sessionStorage.setItem('mm_uid',myId);
var myName='',myColor='',myAvatar='';
var roomCode='',roomRef=null,gbListener=null;
var selDiff='facile',selCats=['tous'];
var timerInterval=null,timerMax=90,timerLeft=0;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CANVAS BACKGROUND
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var cv=document.getElementById('bgc'),cx=cv.getContext('2d'),W,H,particles=[];
function resizeCv(){W=cv.width=window.innerWidth;H=cv.height=window.innerHeight;initParticles();}
function initParticles(){
particles=[];
var n=Math.floor(W*H/20000);
for(var i=0;i<n;i++){
particles.push({x:Math.random()*W,y:Math.random()*H,
r:.5+Math.random()*1.5,
vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,
a:Math.random()*Math.PI*2,
col:['rgba(0,229,204,','rgba(245,200,66,','rgba(255,61,127,'][Math.floor(Math.random()*3)]
});
}
}
function drawCv(){
cx.clearRect(0,0,W,H);
particles.forEach(function(p){
var op=.3+Math.sin(p.a)*.2;
cx.beginPath();cx.arc(p.x,p.y,p.r,0,Math.PI*2);
cx.fillStyle=p.col+op+')';cx.fill();
p.x+=p.vx;p.y+=p.vy;p.a+=.02;
if(p.x<0)p.x=W;if(p.x>W)p.x=0;
if(p.y<0)p.y=H;if(p.y>H)p.y=0;
});
requestAnimationFrame(drawCv);
}
resizeCv();window.addEventListener('resize',resizeCv);drawCv();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function go(id){
document.querySelectorAll('.sc').forEach(function(s){s.classList.remove('on');});
document.getElementById(id).classList.add('on');
document.getElementById('back-btn').classList.toggle('vis',
['s-create','s-join','s-lobby','s-game'].includes(id));
}
function goBack(){leaveRoom();go('s-home');}
function goHome(){leaveRoom();go('s-home');}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// OUTILS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function genCode(){
var c='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
return Array.from({length:4},function(){return c[Math.floor(Math.random()*c.length)];}).join('');
}
function shuffle(a){
var b=[].concat(a);
for(var i=b.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var t=b[i];b[i]=b[j];b[j]=t;}
return b;
}

var toastT;
function toast(msg,type,dur){
dur=dur||2600;
var t=document.getElementById('toast');
t.textContent=msg;t.className='up '+(type||'if');
clearTimeout(toastT);toastT=setTimeout(function(){t.classList.remove('up');},dur);
}
function shk(id){
var el=document.getElementById(id);if(!el)return;
el.classList.add('shk');setTimeout(function(){el.classList.remove('shk');},400);
}
function copyCode(){
if(navigator.clipboard)navigator.clipboard.writeText(roomCode).then(function(){toast('CODE COPIÃ‰ !','ok');}).catch(function(){toast('CODE: '+roomCode,'if');});
else toast('CODE: '+roomCode,'if');
}
function confetti(){
var cols=['#f5c842','#00e5cc','#ff3d7f','#3d7fff','#00e87a'];
for(var i=0;i<80;i++){
var el=document.createElement('div');
var sz=5+Math.random()*10;
el.style.cssText='position:fixed;left:'+Math.random()*100+'vw;top:-20px;width:'+sz+'px;height:'+sz+'px;background:'+cols[Math.floor(Math.random()*cols.length)]+';border-radius:'+(Math.random()>.5?'50%':'2px')+';animation:confY '+(2+Math.random()*3)+'s '+(Math.random()*1.5)+'s linear forwards;z-index:9999;pointer-events:none;';
document.body.appendChild(el);setTimeout(function(){el.remove();},5500);
}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TIMER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startTimer(seconds,onEnd){
clearInterval(timerInterval);
timerLeft=seconds;timerMax=seconds;
updateTimerUI(timerLeft);
timerInterval=setInterval(function(){
timerLeft--;
updateTimerUI(timerLeft);
if(timerLeft<=0){clearInterval(timerInterval);if(onEnd)onEnd();}
},1000);
}
function stopTimer(){clearInterval(timerInterval);}
function updateTimerUI(t){
var txtEl=document.getElementById('timer-txt');
var arcEl=document.getElementById('timer-arc');
if(!txtEl||!arcEl)return;
txtEl.textContent=t;
var pct=t/timerMax;
var offset=113*(1-pct);
arcEl.style.strokeDashoffset=offset;
var col=t>timerMax*.5?'var(--teal)':t>timerMax*.25?'var(--gold)':'var(--red)';
arcEl.style.stroke=col;txtEl.style.color=col;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CRÃ‰ER UNE PARTIE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function createGame(){
var name=document.getElementById('c-name').value.trim();
if(!name){toast('ENTRE TON PSEUDO !','er');shk('c-name');return;}
if(selCats.length===0){toast('CHOISIS AU MOINS UNE CATÃ‰GORIE !','er');return;}

var rounds=parseInt(document.getElementById('c-rounds').value);
var timer=parseInt(document.getElementById('c-timer').value);
var code=genCode();
var idx=0;
myName=name;myColor=COLORS[idx];myAvatar=AVATARS[idx];roomCode=code;

var gameData={
code:code,hostId:myId,
status:'lobby',
rounds:rounds,timer:timer,
difficulty:selDiff,
categories:selCats,
currentRound:0,
masterIdx:0,
currentWord:null,currentCat:null,
hints:[],guesses:{},
scores:{},
roundWinners:{},
players:{},
createdAt:Date.now(),updatedAt:Date.now()
};
gameData.players[myId]={id:myId,name:name,color:myColor,avatar:myAvatar,joinedAt:Date.now()};
gameData.scores[myId]=0;

whenFB(function(){
db.ref('mm_games/'+code).set(gameData).then(function(){
attachListener(code);go('s-lobby');
toast('PARTIE CRÃ‰Ã‰E ! CODE: '+code,'ok',4000);
}).catch(function(e){toast('ERREUR: '+e.message,'er');});
});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REJOINDRE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function joinGame(){
var name=document.getElementById('j-name').value.trim();
var code=document.getElementById('j-code').value.trim().toUpperCase();
if(!name){toast('ENTRE TON PSEUDO !','er');shk('j-name');return;}
if(code.length!==4){toast('CODE Ã€ 4 CARACTÃˆRES !','er');shk('j-code');return;}

whenFB(function(){
db.ref('mm_games/'+code).get().then(function(snap){
if(!snap.exists()){toast('CODE INVALIDE !','er');shk('j-code');return;}
var game=snap.val();
if(game.status!=='lobby'){toast('PARTIE DÃ‰JÃ€ COMMENCÃ‰E !','er');return;}
var cnt=Object.keys(game.players||{}).length;
if(cnt>=8){toast('PARTIE PLEINE !','er');return;}
var idx=cnt%COLORS.length;
myName=name;myColor=COLORS[idx];myAvatar=AVATARS[idx];roomCode=code;
var updates={};
updates['players/'+myId]={id:myId,name:name,color:myColor,avatar:myAvatar,joinedAt:Date.now()};
updates['scores/'+myId]=0;
updates['updatedAt']=Date.now();
db.ref('mm_games/'+code).update(updates).then(function(){
attachListener(code);go('s-lobby');
toast('BIENVENUE '+name.toUpperCase()+' !','ok');
});
}).catch(function(e){toast('ERREUR: '+e.message,'er');});
});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LISTENER FIREBASE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function attachListener(code){
if(gbListener)gbListener();
roomRef=db.ref('mm_games/'+code);
roomRef.on('value',function(snap){
if(!snap.exists())return;
var game=snap.val();
var cur=(document.querySelector('.sc.on')||{}).id||'';
if(game.status==='lobby'){renderLobby(game);}
else if(game.status==='playing'){
if(cur==='s-lobby')go('s-game');
renderGame(game);
}
else if(game.status==='round_end'){
if(cur==='s-lobby')go('s-game');
renderGame(game);
showRoundEnd(game);
}
else if(game.status==='end'){renderEndGame(game);}
});
gbListener=function(){roomRef.off('value');};
}
function leaveRoom(){
stopTimer();
if(gbListener){gbListener();gbListener=null;}
roomRef=null;roomCode='';
document.getElementById('result-overlay').classList.remove('show');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LOBBY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderLobby(game){
document.getElementById('l-code').textContent=game.code;
var players=Object.values(game.players||{}).sort(function(a,b){return a.joinedAt-b.joinedAt;});
var listEl=document.getElementById('l-players');listEl.innerHTML='';
players.forEach(function(p,i){
var isHost=p.id===game.hostId,isMe=p.id===myId;
var div=document.createElement('div');
div.className='prow'+(isMe?' me':'')+(isHost?' master':'');
div.innerHTML='<div class="pav" style="background:'+p.color+'22;color:'+p.color+'">'+p.avatar+'</div>'
+'<div class="pnm">'+p.name+'</div>'
+(isHost?'<span class="pbdg bmaster">HÃ”TE</span>':'<span class="pbdg bready">PRÃŠT</span>')
+(isMe?'<span class="pbdg bme">MOI</span>':'');
listEl.appendChild(div);
});
var cnt=players.length;
document.getElementById('l-status').textContent=cnt+'/8 JOUEUR'+(cnt>1?'S':'');
var catN={tous:'TOUS',animal:'ANIMAUX',pays:'PAYS',sport:'SPORT',objet:'OBJETS',metier:'MÃ‰TIERS',nature:'NATURE',food:'FOOD',cinema:'CINÃ‰MA',musique:'MUSIQUE',science:'SCIENCE',histoire:'HISTOIRE'};
document.getElementById('l-settings').innerHTML=
'<strong style="color:var(--white)">'+game.rounds+' MANCHES</strong> &nbsp;Â·&nbsp; '
+'<span style="color:var(--gold)">'+game.difficulty.toUpperCase()+'</span> &nbsp;Â·&nbsp; '
+(game.categories||['tous']).map(function(c){return catN[c]||c.toUpperCase();}).join(' Â· ')
+' &nbsp;Â·&nbsp; '+game.timer+'S';
var isHost=game.hostId===myId,canStart=cnt>=2;
var startBtn=document.getElementById('l-start');
var hint=document.getElementById('l-hint');
startBtn.style.display=(isHost&&canStart)?'flex':'none';
if(isHost&&!canStart){hint.style.display='block';hint.textContent='IL FAUT AU MOINS 2 JOUEURS';}
else if(!isHost){hint.style.display='block';hint.textContent=canStart?"L'HÃ”TE VA LANCER...":'EN ATTENTE D\'UN AUTRE JOUEUR...';}
else{hint.style.display='none';}
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LANCER UNE PARTIE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startGame(){
whenFB(function(){
db.ref('mm_games/'+roomCode).get().then(function(snap){
var game=snap.val();if(!game)return;
var pids=Object.keys(game.players).sort(function(a,b){return game.players[a].joinedAt-game.players[b].joinedAt;});
if(pids.length<2){toast('IL FAUT 2 JOUEURS MINIMUM !','er');return;}
launchRound(game,pids,0,1);
});
});
}

function launchRound(game,pids,masterIdx,roundNum){
var masterId=pids[masterIdx%pids.length];
var word=getWord(game.categories,game.difficulty);
var cat=game.categories&&game.categories.length===1?game.categories[0]:'devinette';
// trouver la vraie catÃ©gorie du mot
for(var c in WORDS){
for(var d in WORDS[c]){
if(WORDS[c][d].indexOf(word)!==-1){cat=c;break;}
}
}
var initGuesses={};
pids.forEach(function(pid){if(pid!==masterId)initGuesses[pid]=null;});
db.ref('mm_games/'+roomCode).update({
status:'playing',
currentRound:roundNum,
masterIdx:masterIdx,
masterId:masterId,
currentWord:word,
currentCat:cat,
hints:[],
guesses:initGuesses,
roundWinners:{},
roundStart:Date.now(),
updatedAt:Date.now()
});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RENDU JEU
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var lastRound=-1,lastStatus='';
function renderGame(game){
stopTimer();
var isMaster=game.masterId===myId;
var isHost=game.hostId===myId;
document.getElementById('g-round').textContent=game.currentRound+'/'+game.rounds;
document.getElementById('g-master').textContent=(game.players&&game.players[game.masterId]?game.players[game.masterId].name:'?').toUpperCase();
var pct=((game.currentRound-1)/game.rounds)*100;
document.getElementById('g-prog').style.width=pct+'%';

// Mettre Ã  jour scores dans topbar joueurs
document.getElementById('ph-master').style.display=isMaster?'block':'none';
document.getElementById('ph-guess').style.display=isMaster?'none':'block';

if(game.status==='playing'){
// Timer
var elapsed=Math.floor((Date.now()-game.roundStart)/1000);
var remaining=Math.max(0,game.timer-elapsed);
if(remaining>0){
startTimer(remaining,function(){
// Temps Ã©coulÃ© â€” hÃ´te finit le round
if(isHost)endRound(game,false);
});
}

if(isMaster){
renderMasterView(game);
}else{
renderGuessView(game);
}
}
}

function renderMasterView(game){
document.getElementById('master-word').textContent=game.currentWord||'...';
document.getElementById('master-cat').textContent='CatÃ©gorie : '+(game.currentCat||'?').toUpperCase();
// Indices dÃ©jÃ  envoyÃ©s
var hSent=document.getElementById('hints-sent');hSent.innerHTML='';
(game.hints||[]).forEach(function(h,i){
var d=document.createElement('div');
d.style.cssText='font-family:"Share Tech Mono",monospace;font-size:11px;color:var(--teal);padding:5px 8px;background:rgba(0,229,204,.07);border-radius:6px;border:1px solid rgba(0,229,204,.15);';
d.textContent='['+(i+1)+'] '+h.text+' â€” '+h.who;
hSent.appendChild(d);
});
// Afficher les tentatives
renderGuessesOnly(game);
}

function renderGuessView(game){
// Blancs
var word=game.currentWord||'';
var blanksEl=document.getElementById('g-blanks');blanksEl.innerHTML='';

// RÃ©vÃ©ler des lettres progressivement selon les indices
var hints=game.hints||[];
var revealed=new Set();
// RÃ©vÃ©ler 1 lettre par tranche de 2 indices
if(hints.length>=2){var n=Math.floor(hints.length/2);for(var i=0;i<Math.min(n,word.length-1);i++){revealed.add(i);}}

for(var i=0;i<word.length;i++){
var sp=document.createElement('span');
if(word[i]===' '){sp.className='blank space';}
else{
sp.className='blank'+(revealed.has(i)?' revealed':'');
sp.textContent=revealed.has(i)?word[i]:'';
}
blanksEl.appendChild(sp);
}

// Info sur le mot
var realLen=word.replace(/ /g,'').length;
document.getElementById('g-letters-info').textContent=realLen+' LETTRE'+(realLen>1?'S':'')+(word.includes(' ')?' Â· PLUSIEURS MOTS':'');

// Points disponibles
var pts=Math.max(10,100-((game.hints||[]).length*10));
document.getElementById('g-pts').textContent='â­ '+pts+'pts';
document.getElementById('g-cat').textContent=(game.currentCat||'?').toUpperCase();

// Indices
var indEl=document.getElementById('g-indices');indEl.innerHTML='';
var hints=game.hints||[];
if(hints.length===0){
indEl.innerHTML='<div class="no-indice">EN ATTENTE DU PREMIER INDICE...</div>';
}else{
hints.forEach(function(h,i){
var d=document.createElement('div');d.className='indice';
d.innerHTML='<span class="indice-num">#'+(i+1)+'</span>'
+'<div><div class="indice-txt">'+h.text+'</div>'
+'<div class="indice-who">Par '+h.who+'</div></div>';
indEl.appendChild(d);
});
}

// Tentatives
renderGuessesOnly(game);

// Input â€” dÃ©sactivÃ© si dÃ©jÃ  devinÃ©
var myGuess=game.guesses&&game.guesses[myId];
var gInputZone=document.getElementById('guess-input-zone');
var alreadyEl=document.getElementById('already-guessed');
if(myGuess===true){
gInputZone.style.display='none';alreadyEl.style.display='block';
}else{
gInputZone.style.display='block';alreadyEl.style.display='none';
}
}

function renderGuessesOnly(game){
var feed=document.getElementById('g-guesses');if(!feed)return;
feed.innerHTML='';
var guesses=game.guesses||{};
var hasAny=false;
Object.entries(guesses).forEach(function(entry){
var pid=entry[0],val=entry[1];
if(!val||val===true)return;
if(typeof val!=='object')return;
hasAny=true;
var p=game.players&&game.players[pid];
var isCorrect=val.correct;
var isClose=val.close;
var div=document.createElement('div');
div.className='guess-row'+(isCorrect?' correct':isClose?' close':' wrong');
div.innerHTML='<span class="guess-who" style="color:'+(p?p.color:'#fff')+'">'+( p?p.name:'?')+'</span>'
+'<span class="guess-word">'+val.word+'</span>'
+'<span class="guess-result">'+(isCorrect?'âœ…':isClose?'ğŸŸ¡':'âŒ')+'</span>';
feed.appendChild(div);
});
if(!hasAny)feed.innerHTML='<div class="no-indice">PERSONNE N\'A ENCORE ESSAYÃ‰...</div>';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ENVOYER UN INDICE (MAÃTRE)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function sendHint(){
var inp=document.getElementById('hint-inp');
var txt=inp.value.trim();
if(!txt){toast('Ã‰CRIS UN INDICE !','er');shk('hint-inp');return;}
// VÃ©rifier que l'indice ne contient pas le mot
whenFB(function(){
db.ref('mm_games/'+roomCode).get().then(function(snap){
var game=snap.val();if(!game)return;
var word=(game.currentWord||'').toLowerCase();
if(txt.toLowerCase().includes(word)){
toast('INTERDIT DE DIRE LE MOT !','er');shk('hint-inp');return;
}
var hints=game.hints||[];
hints.push({text:txt,who:myName,at:Date.now()});
db.ref('mm_games/'+roomCode).update({hints:hints,updatedAt:Date.now()});
inp.value='';toast('INDICE ENVOYÃ‰ !','ok');
});
});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DEVINER (JOUEURS)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function submitGuess(){
var inp=document.getElementById('guess-inp');
var word=inp.value.trim().toUpperCase();
if(!word){toast('ENTRE UN MOT !','er');shk('guess-inp');return;}
inp.value='';

whenFB(function(){
db.ref('mm_games/'+roomCode).get().then(function(snap){
var game=snap.val();if(!game)return;
if(game.status!=='playing')return;
var correct=(word===game.currentWord.toUpperCase());
// VÃ©rifier si proche (Levenshtein simplifiÃ©)
var close=!correct&&levenshtein(word,game.currentWord.toUpperCase())<=2;
var pts=Math.max(10,100-((game.hints||[]).length*10));

var updates={};
updates['guesses/'+myId]={word:word,correct:correct,close:close,at:Date.now()};
updates['updatedAt']=Date.now();

if(correct){
// Ajouter les points
var curScore=(game.scores&&game.scores[myId])||0;
updates['scores/'+myId]=curScore+pts;
// Ajouter comme gagnant du round
var winners=game.roundWinners||{};
if(!winners[myId])updates['roundWinners/'+myId]={name:myName,pts:pts};
toast('ğŸ‰ BRAVO ! +'+pts+' POINTS !','gd',3000);
}else if(close){
toast('ğŸŸ¡ PRESQUE ! ENCORE UN EFFORT...','if');
}else{
toast('âŒ RATÃ‰...','er',1500);
}

db.ref('mm_games/'+roomCode).update(updates).then(function(){
// VÃ©rifier si tous ont devinÃ©
if(correct){
db.ref('mm_games/'+roomCode).get().then(function(snap2){
var g2=snap2.val();if(!g2)return;
var pids=Object.keys(g2.players).filter(function(pid){return pid!==g2.masterId;});
var allFound=pids.every(function(pid){
return g2.guesses&&g2.guesses[pid]&&(g2.guesses[pid]===true||g2.guesses[pid].correct);
});
if(allFound&&g2.hostId===myId){endRound(g2,true);}
});
}
});
});
});
}

// Levenshtein simplifiÃ©
function levenshtein(a,b){
var m=a.length,n=b.length,dp=[];
for(var i=0;i<=m;i++){dp[i]=[i];for(var j=1;j<=n;j++)dp[i][j]=i===0?j:0;}
for(var j=1;j<=n;j++)dp[0][j]=j;
for(var i=1;i<=m;i++)for(var j=1;j<=n;j++){
if(a[i-1]===b[j-1])dp[i][j]=dp[i-1][j-1];
else dp[i][j]=1+Math.min(dp[i-1][j],dp[i][j-1],dp[i-1][j-1]);
}
return dp[m][n];
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FIN DE MANCHE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function endRound(game,allFound){
stopTimer();
// Bonus maÃ®tre si quelqu'un a trouvÃ©
var winners=game.roundWinners||{};
var updates={status:'round_end',updatedAt:Date.now()};
if(Object.keys(winners).length>0){
// MaÃ®tre reÃ§oit des points pour chaque bonne rÃ©ponse
var masterBonus=Object.keys(winners).length*20;
var curMaster=(game.scores&&game.scores[game.masterId])||0;
updates['scores/'+game.masterId]=curMaster+masterBonus;
}
db.ref('mm_games/'+roomCode).update(updates);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AFFICHER RÃ‰SULTAT DU ROUND
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
var overlayShown=false;
function showRoundEnd(game){
if(overlayShown)return;
overlayShown=true;
var overlay=document.getElementById('result-overlay');
overlay.classList.add('show');
var winners=game.roundWinners||{};
var hasWinner=Object.keys(winners).length>0;
document.getElementById('ro-icon').textContent=hasWinner?'ğŸ‰':'â°';
document.getElementById('ro-title').textContent=hasWinner?'MOT TROUVÃ‰ !':'TEMPS Ã‰COULÃ‰ !';
document.getElementById('ro-word').textContent='Le mot Ã©tait : '+game.currentWord;

// Scores du round
var scEl=document.getElementById('ro-scores');scEl.innerHTML='';
Object.entries(winners).forEach(function(e){
var d=document.createElement('div');
d.style.cssText='font-family:"Share Tech Mono",monospace;font-size:13px;color:var(--green);margin:3px 0;';
d.textContent='ğŸ… '+e[1].name+' +'+e[1].pts+'pts';
scEl.appendChild(d);
});
if(!hasWinner){
var d=document.createElement('div');
d.style.cssText='font-family:"Share Tech Mono",monospace;font-size:12px;color:var(--muted);';
d.textContent='Personne n\'a trouvÃ© ce round...';
scEl.appendChild(d);
}

var isHost=game.hostId===myId;
var isLast=game.currentRound>=game.rounds;
document.getElementById('ro-next').style.display=isHost?'flex':'none';
document.getElementById('ro-wait').style.display=isHost?'none':'block';
document.getElementById('ro-next').textContent=isLast?'ğŸ† VOIR LES RÃ‰SULTATS':'PROCHAINE MANCHE â†’';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MANCHE SUIVANTE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function nextRound(){
overlayShown=false;
document.getElementById('result-overlay').classList.remove('show');
whenFB(function(){
db.ref('mm_games/'+roomCode).get().then(function(snap){
var game=snap.val();if(!game||game.hostId!==myId)return;
if(game.currentRound>=game.rounds){
db.ref('mm_games/'+roomCode).update({status:'end',updatedAt:Date.now()});
return;
}
var pids=Object.keys(game.players).sort(function(a,b){return game.players[a].joinedAt-game.players[b].joinedAt;});
launchRound(game,pids,(game.masterIdx+1)%pids.length,game.currentRound+1);
});
});
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FIN DE PARTIE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderEndGame(game){
stopTimer();
overlayShown=false;
document.getElementById('result-overlay').classList.remove('show');
go('s-end');confetti();

var players=Object.values(game.players||{});
var scores=game.scores||{};
players.sort(function(a,b){return (scores[b.id]||0)-(scores[a.id]||0);});

var medals=['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
var tbl=document.getElementById('e-scores');tbl.innerHTML='';
players.forEach(function(p,i){
var pts=scores[p.id]||0;
var div=document.createElement('div');div.className='score-row';
div.innerHTML='<div class="score-rank">'+(medals[i]||'#'+(i+1))+'</div>'
+'<div class="pav" style="background:'+p.color+'22;color:'+p.color+'">'+p.avatar+'</div>'
+'<div class="score-name">'+p.name+(p.id===myId?' <span style="font-family:\'Share Tech Mono\';font-size:10px;color:var(--muted)">(MOI)</span>':'')+'</div>'
+'<div class="score-pts">'+pts+'</div>';
tbl.appendChild(div);
});

var winner=players[0];
document.getElementById('e-winner').textContent=winner?(winner.id===myId?'ğŸ‰ TU AS GAGNÃ‰ !':(winner.name.toUpperCase()+' REMPORTE LA PARTIE !')):'';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DOMContentLoaded â€” tous les event listeners
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('DOMContentLoaded',function(){

document.getElementById('back-btn').addEventListener('click',goBack);
document.getElementById('theme-btn').addEventListener('click',function(){applyTheme(!isLight);});

// Home
document.getElementById('btn-go-create').addEventListener('click',function(){go('s-create');});
document.getElementById('btn-go-join').addEventListener('click',function(){go('s-join');});

// DifficultÃ©
document.querySelectorAll('.dtile').forEach(function(tile){
tile.addEventListener('click',function(){
document.querySelectorAll('.dtile').forEach(function(t){t.classList.remove('on');});
this.classList.add('on');selDiff=this.dataset.diff;
});
});

// CatÃ©gories
document.getElementById('cat-wrap').addEventListener('click',function(e){
var chip=e.target;while(chip&&chip!==this&&!chip.classList.contains('cchip'))chip=chip.parentElement;
if(!chip||!chip.classList.contains('cchip'))return;
var cat=chip.dataset.cat;
if(cat==='tous'){
// Toggle "TOUS" exclusif
var allOn=chip.classList.contains('on');
document.querySelectorAll('.cchip').forEach(function(c){c.classList.remove('on');});
if(!allOn){chip.classList.add('on');selCats=['tous'];}
else{selCats=[];}
}else{
// DÃ©cocher "TOUS" si autre catÃ©gorie sÃ©lectionnÃ©e
document.querySelector('.cchip[data-cat="tous"]').classList.remove('on');
chip.classList.toggle('on');
selCats=Array.from(document.querySelectorAll('.cchip.on')).map(function(c){return c.dataset.cat;});
if(selCats.length===0){
document.querySelector('.cchip[data-cat="tous"]').classList.add('on');selCats=['tous'];
}
}
});

// Create
document.getElementById('btn-create').addEventListener('click',createGame);
document.getElementById('btn-create-back').addEventListener('click',function(){go('s-home');});

// Join
document.getElementById('btn-join').addEventListener('click',joinGame);
document.getElementById('btn-join-back').addEventListener('click',function(){go('s-home');});
var jcode=document.getElementById('j-code');
jcode.addEventListener('input',function(){this.value=this.value.toUpperCase().replace(/[^A-Z0-9]/g,'');});
jcode.addEventListener('keydown',function(e){if(e.key==='Enter')joinGame();});

// Lobby
document.getElementById('l-start').addEventListener('click',startGame);
document.getElementById('btn-copy').addEventListener('click',copyCode);

// Game â€” MaÃ®tre
document.getElementById('btn-hint').addEventListener('click',sendHint);
document.getElementById('hint-inp').addEventListener('keydown',function(e){if(e.key==='Enter')sendHint();});

// Game â€” Devineurs
document.getElementById('btn-guess').addEventListener('click',submitGuess);
document.getElementById('guess-inp').addEventListener('keydown',function(e){
if(e.key==='Enter')submitGuess();
this.value=this.value.toUpperCase();
});
document.getElementById('guess-inp').addEventListener('input',function(){this.value=this.value.toUpperCase();});

// Round result overlay
document.getElementById('ro-next').addEventListener('click',function(){
whenFB(function(){
db.ref('mm_games/'+roomCode).get().then(function(snap){
var game=snap.val();
if(game&&game.currentRound>=game.rounds){
overlayShown=false;
document.getElementById('result-overlay').classList.remove('show');
db.ref('mm_games/'+roomCode).update({status:'end',updatedAt:Date.now()});
}else{
nextRound();
}
});
});
});

// End screen
document.getElementById('btn-replay').addEventListener('click',goHome);
document.getElementById('btn-home-end').addEventListener('click',goHome);
});
</script>

</body>
</html>